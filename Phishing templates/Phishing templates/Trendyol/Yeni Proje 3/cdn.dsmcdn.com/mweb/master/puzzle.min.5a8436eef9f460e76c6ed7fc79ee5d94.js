!function(e){var n={};function t(r){if(n[r])return n[r].exports;var o=n[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,t),o.l=!0,o.exports}t.m=e,t.c=n,t.d=function(e,n,r){t.o(e,n)||Object.defineProperty(e,n,{enumerable:!0,get:r})},t.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},t.t=function(e,n){if(1&n&&(e=t(e)),8&n)return e;if(4&n&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(t.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&n&&"string"!=typeof e)for(var o in e)t.d(r,o,function(n){return e[n]}.bind(null,o));return r},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,n){return Object.prototype.hasOwnProperty.call(e,n)},t.p="",t(t.s=7)}([function(e,n,t){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),function(e){e.GREY="#7f8c8d",e.GREEN="#2ecc71",e.YELLOW="#f39c12",e.RED="#c0392b",e.BLUE="#3498db"}(n.LOG_COLORS||(n.LOG_COLORS={})),function(e){e.INFO="info",e.ERROR="error",e.WARN="warn",e.LOG="log"}(n.LOG_TYPES||(n.LOG_TYPES={})),function(e){e[e.ON_PAGE_LOAD=0]="ON_PAGE_LOAD",e[e.ON_FRAGMENT_RENDERED=1]="ON_FRAGMENT_RENDERED",e[e.ON_CONFIG=2]="ON_CONFIG",e[e.ON_DEBUG_CONFIG=3]="ON_DEBUG_CONFIG",e[e.ON_VARIABLES=4]="ON_VARIABLES",e[e.ON_RENDER_START=5]="ON_RENDER_START"}(n.EVENT||(n.EVENT={})),function(e){e.HTML_TRANSFER_STARTED="html-transfer-start",e.HTML_TRANSFER_ENDED="html-transfer-end",e.FRAGMENT_RENDER_START="fragment-render-started-",e.FRAGMENT_RENDER_END="fragment-render-ended-",e.FRAGMENT_MEASUREMENT="fragment-total-",e.FRAGMENT_MEASUREMENT_RESPONSE_START_TIME="fragment-response-start-"}(n.TIME_LABELS||(n.TIME_LABELS={})),function(e){e[e.ON_RENDER_START=0]="ON_RENDER_START",e[e.ON_FRAGMENT_RENDER=1]="ON_FRAGMENT_RENDER",e[e.ON_PAGE_RENDER=2]="ON_PAGE_RENDER"}(n.RESOURCE_LOADING_TYPE||(n.RESOURCE_LOADING_TYPE={})),function(e){e[e.CSS=0]="CSS",e[e.JS=1]="JS"}(n.RESOURCE_TYPE||(n.RESOURCE_TYPE={})),function(e){e.ASYNC="async",e.DEFER="defer",e.SYNC=""}(n.RESOURCE_JS_EXECUTE_TYPE||(n.RESOURCE_JS_EXECUTE_TYPE={})),function(e){e.ASYNC="async",e.SYNC=""}(n.RESOURCE_CSS_EXECUTE_TYPE||(n.RESOURCE_CSS_EXECUTE_TYPE={}))},function(e,n,t){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=function(){};n.Module=r},function(e,n,t){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=t(3);n.on=function(e){return function(n,t,o){return r.PuzzleJs.subscribe(e,o.value.bind(n)),o}}},function(e,n,t){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=function(){function e(){}return e.subscribe=function(n,t){e.__LISTENERS[n]?e.__LISTENERS[n].push(t):e.__LISTENERS[n]=[t]},e.emit=function(n){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];if(e.__LISTENERS[n])for(var o=0,i=e.__LISTENERS[n];o<i.length;o++){var a=i[o];a.apply(null,t)}},e.clearListeners=function(){e.__LISTENERS={}},e.inject=function(n){for(var t in n)e[t]=n[t]},e.LOGO="https://image.ibb.co/jM29on/puzzlelogo.png",e.__LISTENERS={},e}();n.PuzzleJs=r},,function(e,n,t){"use strict";var r,o=this&&this.__extends||(r=function(e,n){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var t in n)n.hasOwnProperty(t)&&(e[t]=n[t])})(e,n)},function(e,n){function t(){this.constructor=e}r(e,n),e.prototype=null===n?Object.create(n):(t.prototype=n.prototype,new t)}),i=this&&this.__assign||function(){return(i=Object.assign||function(e){for(var n,t=1,r=arguments.length;t<r;t++)for(var o in n=arguments[t])Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o]);return e}).apply(this,arguments)},a=this&&this.__decorate||function(e,n,t,r){var o,i=arguments.length,a=i<3?n:null===r?r=Object.getOwnPropertyDescriptor(n,t):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,n,t,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(i<3?o(a):i>3?o(n,t,a):o(n,t))||a);return i>3&&a&&Object.defineProperty(n,t,a),a},s=this&&this.__metadata||function(e,n){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,n)};Object.defineProperty(n,"__esModule",{value:!0});var u=t(1),c=t(0),f=t(2),d=t(6),l=function(e){function n(){return null!==e&&e.apply(this,arguments)||this}return o(n,e),Object.defineProperty(n,"_pageConfiguration",{get:function(){return this.__pageConfiguration},set:function(e){this.__pageConfiguration=e},enumerable:!0,configurable:!0}),n.config=function(e){n.__pageConfiguration=JSON.parse(e),n.__pageConfiguration.fragments.some((function(e){return e.asyncDecentralized}))&&(n.gun=window.Gun({peers:n.__pageConfiguration.peers}));var t=n.__pageConfiguration.fragments.filter((function(e){return!e.onDemand})),r=t.filter((function(e){return e.clientAsync&&e.clientAsyncForce}));if(r.length&&r.forEach((function(e){return n.asyncLoadFragment(e)})),this.isIntersectionObserverSupported()){var o=t.some((function(e){return e.clientAsync}));o&&n.__pageConfiguration.intersectionObserverOptions?this.observer=new IntersectionObserver(this.onIntersection.bind(this),n.__pageConfiguration.intersectionObserverOptions):o&&(this.observer=new IntersectionObserver(this.onIntersection.bind(this)))}},n.load=function(e,t,r){t&&r&&n.__replace(t,r)},n.loadAssetsOnFragment=function(e,t,r,o){var i=n.__pageConfiguration.assets.filter((function(n){return!(n.fragment!==e||o&&n.gateway&&o!==n.gateway||n.loadMethod!==c.RESOURCE_LOADING_TYPE.ON_FRAGMENT_RENDER||n.preLoaded)})),a=n.createLoadQueue(i);d.AssetHelper.loadAssetSeries(a)},n.pageLoaded=function(){var e=n.__pageConfiguration.assets.filter((function(e){if(e.loadMethod===c.RESOURCE_LOADING_TYPE.ON_PAGE_RENDER&&!e.preLoaded){var t=n.__pageConfiguration.fragments.find((function(n){return!(n.name!==e.fragment||n.gateway&&e.gateway&&n.gateway!==e.gateway)}));return t&&"false"!==t.attributes.if}return!1})),t=n.createLoadQueue(e);d.AssetHelper.loadAssetSeries(t)},n.asyncComponentRender=function(){var e=this;n.__pageConfiguration.fragments.filter((function(e){return e.clientAsync&&!e.onDemand})).forEach((function(n){if(e.observer){var t=document.querySelector(e.getFragmentContainerSelector(n,"main"));t&&e.observer.observe(t)}else e.asyncLoadFragment(n)}))},n.asyncLoadFragment=function(e){var t=this;if(e.asyncLoaded)return Promise.resolve();e.asyncLoaded=!0;var r=this.prepareQueryString(e.attributes),o=""+e.source+window.location.pathname+r;if(!e.asyncDecentralized)return this.fetchGatewayFragment(e).then((function(n){return t.asyncRenderResponse(e,n)}));n.gun.get(o,(function(r){!r.err&&r.put||t.fetchGatewayFragment(e).then((function(e){return n.gun.get(o).put(i(i(i({},e),e.$headers?{$headers:JSON.stringify(e.$headers)}:{}),e.$model?{$model:JSON.stringify(e.$model)}:{}))}))})).on((function(r){try{r.$model=JSON.parse(r.$model),r.$headers=JSON.parse(r.$headers),t.asyncRenderResponse(e,r)}catch(r){t.fetchGatewayFragment(e).then((function(e){return n.gun.get(o).put(i(i(i({},e),e.$headers?{$headers:JSON.stringify(e.$headers)}:{}),e.$model?{$model:JSON.stringify(e.$model)}:{}))}))}}))},n.fetchGatewayFragment=function(e){var n=this.prepareQueryString(e.attributes),t=""+e.source+(e.attributes.withoutPathname?"/":window.location.pathname)+n;return fetch(t,{headers:{originalurl:window.location.pathname},credentials:"include"}).then((function(e){return e.json()}))},n.asyncRenderResponse=function(e,t){var r=this;if(t.$model&&Object.keys(t.$model).forEach((function(e){window[e]=t.$model[e]})),t.$headers){var o=t.$headers.location||t.$headers.Location;if(o)return location.replace(o)}var i=n.__pageConfiguration.assets.filter((function(n){return!(n.fragment!==e.name||e.gateway&&n.gateway&&e.gateway!==n.gateway)})),a=n.createLoadQueue(i,!0);d.AssetHelper.loadAssetSeries(a,(function(){Object.keys(t).forEach((function(n){if(!n.startsWith("$")){var o=document.querySelector(r.getFragmentContainerSelector(e,n));o&&r.setEvalInnerHtml(o,t[n],"META"===o.tagName)}}))}))},n.getFragmentContainerSelector=function(e,n){var t="main"===n?'[puzzle-fragment="'+e.name+'"]:not([fragment-partial])':'[puzzle-fragment="'+e.name+'"][fragment-partial="'+n+'"]';return e.gateway?'[puzzle-gateway="'+e.gateway+'"]'+t:t},n.prepareQueryString=function(e){var n=Object.assign(window.location.search.slice(1).split("&").reduce((function(e,n){var t=n.split("="),r=t[0],o=t[1];return void 0!==o&&(e[r]=o),e}),{}),e);return delete n.source,Object.keys(n).reduce((function(e,t){return e+"&"+t+"="+n[t]}),"?__renderMode=stream")},n.setEvalInnerHtml=function(e,n,t){t?e.outerHTML=n:(e.innerHTML=n,Array.from(e.querySelectorAll("script")).forEach((function(e){var n=document.createElement("script");Array.from(e.attributes).forEach((function(e){return n.setAttribute(e.name,e.value)})),n.appendChild(document.createTextNode(e.innerHTML)),e.parentNode.replaceChild(n,e)})))},n.onVariables=function(e,n,t){window[n]=t},n.createLoadQueue=function(e,t){var r=[];return e.forEach((function(e){var o=n.__pageConfiguration.fragments.find((function(n){return!(n.name!==e.fragment||n.gateway&&e.gateway&&n.gateway!==e.gateway)}));(t||o&&!o.clientAsync)&&(e.type===c.RESOURCE_TYPE.JS?e.preLoaded||(e.preLoaded=!0,e.defer=!0,e.dependent&&e.dependent.forEach((function(e){var t=n.__pageConfiguration.dependencies.filter((function(n){return n.name===e}))[0];o&&o.clientAsync?t&&-1===r.indexOf(t)&&(r.push(t),t.preLoaded=!0):t&&!t.preLoaded&&-1===r.indexOf(t)&&(r.push(t),t.preLoaded=!0)})),-1===r.indexOf(e)&&r.push(e)):e.type===c.RESOURCE_TYPE.CSS&&-1===r.indexOf(e)&&r.push(e))})),r},n.__replace=function(e,n){var t=window.document.querySelector(n),r=t.innerHTML;t.parentNode.removeChild(t),window.document.querySelector(e).innerHTML=r},n.onIntersection=function(e,t){var r=this;e.forEach((function(e){if(e.isIntersecting){var o=e.target,i=o.getAttribute("puzzle-fragment"),a=o.getAttribute("puzzle-gateway"),s=n.__pageConfiguration.fragments.find((function(e){return!(e.name!==i||e.gateway&&a&&e.gateway!==a)}));s&&(r.asyncLoadFragment(s),t.unobserve(o))}}))},n.renderAsyncFragment=function(e,n){var t=this.__pageConfiguration.fragments.find((function(t){return!(t.name!==e||t.gateway&&n&&t.gateway!==n)}));if(t){var r=this.getFragmentContainerSelector(t,"main"),o=window.document.querySelector(r);if(o)return this.observer&&this.observer.unobserve(o),this.asyncLoadFragment(t)}return Promise.resolve()},n.isIntersectionObserverSupported=function(){return"IntersectionObserver"in window&&"IntersectionObserverEntry"in window&&"intersectionRatio"in window.IntersectionObserverEntry.prototype},a([f.on(c.EVENT.ON_CONFIG),s("design:type",Function),s("design:paramtypes",[String]),s("design:returntype",void 0)],n,"config",null),a([f.on(c.EVENT.ON_FRAGMENT_RENDERED),s("design:type",Function),s("design:paramtypes",[String,String,String]),s("design:returntype",void 0)],n,"load",null),a([f.on(c.EVENT.ON_FRAGMENT_RENDERED),s("design:type",Function),s("design:paramtypes",[String,String,String,String]),s("design:returntype",void 0)],n,"loadAssetsOnFragment",null),a([f.on(c.EVENT.ON_PAGE_LOAD),s("design:type",Function),s("design:paramtypes",[]),s("design:returntype",void 0)],n,"pageLoaded",null),a([f.on(c.EVENT.ON_PAGE_LOAD),s("design:type",Function),s("design:paramtypes",[]),s("design:returntype",void 0)],n,"asyncComponentRender",null),a([f.on(c.EVENT.ON_VARIABLES),s("design:type",Function),s("design:paramtypes",[String,String,Object]),s("design:returntype",void 0)],n,"onVariables",null),n}(u.Module);n.Core=l},function(e,n,t){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=t(0),o=function(){function e(){}return e.createDeferred=function(){var e,n;return{promise:new Promise((function(t,r){e=t,n=r})),resolve:e,reject:n}},e.loadJs=function(e){var n=this,t=window.document.createElement("script");return this.promises[e.name]||(this.promises[e.name]=this.createDeferred(),t.type="text/javascript",t.setAttribute("puzzle-asset",e.name),t.src=e.link,t.defer=e.defer||!1,t.crossOrigin="anonymous",e.defer?this.promises[e.name].resolve():(t.onload=function(){n.promises[e.name].resolve()},t.onerror=function(){n.promises[e.name].reject()}),window.document.body.appendChild(t)),this.promises[e.name].promise},e.loadCSS=function(e){var n=this,t=window.document.createElement("link");return this.promises[e.name]||(this.promises[e.name]=this.createDeferred(),t.rel="stylesheet",t.setAttribute("puzzle-asset",e.name),t.href=e.link,t.onload=function(){n.promises[e.name].resolve()},t.onerror=function(){n.promises[e.name].reject()},window.document.head.appendChild(t)),this.promises[e.name].promise},e.loadAssetSeries=function(n,t){!n.length&&t&&t();for(var o,i=function(i,a){a=a.then((function(){return new Promise((function(t,o){var a=n[i];if(a.type===r.RESOURCE_TYPE.JS)e.loadJs(a).then((function(){t(null)})).catch((function(){o(null)}));else if(a.type===r.RESOURCE_TYPE.CSS){e.loadCSS(a).then((function(){t(null)})).catch((function(){o(null)}))}}))})).then((function(){t&&n.length-1===i&&t()})).catch((function(){t&&n.length-1===i&&t()})),o=a},a=0,s=Promise.resolve();a<n.length;a++)i(a,s),s=o},e.promises={},e}();n.AssetHelper=o},function(e,n,t){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r,o=t(3),i=t(5);r={Core:i.Core},o.PuzzleJs.inject(r),window.PuzzleJs=o.PuzzleJs}]);