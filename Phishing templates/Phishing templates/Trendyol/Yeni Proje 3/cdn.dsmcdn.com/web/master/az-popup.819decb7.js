var e=Object.defineProperty,t=Object.prototype.hasOwnProperty,o=Object.getOwnPropertySymbols,a=Object.prototype.propertyIsEnumerable,n=(t,o,a)=>o in t?e(t,o,{enumerable:!0,configurable:!0,writable:!0,value:a}):t[o]=a,i=(e,i)=>{for(var c in i||(i={}))t.call(i,c)&&n(e,c,i[c]);if(o)for(var c of o(i))a.call(i,c)&&n(e,c,i[c]);return e};import{T as c,C as r,a as l}from"./az-popup.690e52e9.vendor.js";!function(e=".",t="__import__"){try{self[t]=new Function("u","return import(u)")}catch(o){const a=new URL(e,location),n=e=>{URL.revokeObjectURL(e.src),e.remove()};self[t]=e=>new Promise(((o,i)=>{const c=new URL(e,a);if(self[t].moduleMap[c])return o(self[t].moduleMap[c]);const r=new Blob([`import * as m from '${c}';`,`${t}.moduleMap['${c}']=m;`],{type:"text/javascript"}),l=Object.assign(document.createElement("script"),{type:"module",src:URL.createObjectURL(r),onerror(){i(new Error(`Failed to import: ${e}`)),n(l)},onload(){o(self[t].moduleMap[c]),n(l)}});document.head.appendChild(l)})),self[t].moduleMap={}}}("/");const s={tr:JSON.parse("{}")},d={transition:"opacity 300ms ease-in-out",opacity:0},p={entering:{opacity:0,zIndex:999},entered:{opacity:1},exiting:{opacity:0},exited:{opacity:0,zIndex:-1}};var m,u;(u=m||(m={}))[u.Default=0]="Default",u[u.Color1=1]="Color1";const v={0:"rgba(0, 0, 0, 0.6)",1:"rgba(51, 51, 51, 0.70)"};class w extends React.Component{constructor(e){super(e),this.close=()=>{this.props.closeModal&&this.props.closeModal()},this.componentDidMount=()=>{this.props.isShowModal&&document.body.classList.add("az-popup-lock")},this.componentWillUnmount=()=>{document.body.classList.remove("az-popup-lock")},this.getModalContent=()=>{const{isShowModal:e,hideCloseIcon:t}=this.props,{children:o}=this.props;return React.createElement(c,{in:e,timeout:300},(e=>React.createElement("div",{className:"modal",style:i(i(i({},d),p[e]),{background:this.bgColor})},React.createElement("div",{className:"modal-content"},!t&&React.createElement("div",{className:"modal-close",title:"Kapat",onClick:this.close}),o))))},this.bgColor=v[e.bgColor||0]}render(){const e=this.props.isShowModal?void 0:"disabled";return React.createElement("div",{id:"az-popup-modal",className:e},this.getModalContent())}}const g=({configuration:e})=>{const{millaAzPopupConfig:t,siteBaseUrl:o}=e;return React.createElement(w,{isShowModal:!0,hideCloseIcon:!0,bgColor:m.Color1},React.createElement("div",{className:"milla-az-popup"},React.createElement("div",{className:"milla-az-popup-icon-container"},React.createElement("img",{className:"milla-az-popup-icon-container-image",src:t.iconUrl,alt:"milla-az-icon"})),React.createElement("div",{className:"milla-az-popup-info-container"},React.createElement("div",{className:"milla-az-popup-info-container-title"},t.titleText),React.createElement("div",{className:"milla-az-popup-info-container-description"},t.descriptionText)),React.createElement("a",{href:o,className:"milla-az-popup-button"},t.ctaText)))},f=e=>{const t=document.cookie.split(";");for(let o=0;o<t.length;o++){let a=t[o].substr(0,t[o].indexOf("="));const n=t[o].substr(t[o].indexOf("=")+1);if(a=a.replace(/^\s+|\s+$/g,""),a===e)return unescape(decodeURIComponent(n.replace(/\+/g," ")))}},b=(e,t,o)=>{const a=o?"":`expires=${new Date((new Date).getTime()+31536e6).toUTCString()};`;document.cookie=`${e}=${t};${a}domain=.trendyol.com;path=/;`},h=e=>{if(!e)return"";const t=e.split("&").find((e=>e.startsWith("x=")));return t&&t.split("=")[1]||""},E=(e=>{const t=new Map;return(...o)=>{const a=JSON.stringify(o);if(t.has(a))return t.get(a);const n=e(...o);return t.set(a,n),n}})((()=>{const e=window.location.host,t=new r(e),o=t.getItem("COOKIE_TY.Entrance");return{sid:t.getItem("sid")||"",pid:t.getItem("pid")||"",id:h(o),abTestCookie:t.getItem("WebAbTesting")||""}})),y=()=>window.hasOwnProperty("_gcol"),R=(e,t)=>{var o,a,n,i;if(y()){const{id:c,abTestCookie:r,pid:l,sid:s}=E(),d={channel:"web",event:"az_delivery",sid:s,pid:l,tv003:"popup_click",tv006:r,tv007:c,tv018:c.length>0?"1":"0",tv019:window.location.href,tv020:"homepage",tv021:document.referrer,tv022:null==(a=null==window?void 0:window._gcol)?void 0:a.getReferrerPageType(null==(o=null==window?void 0:window.location)?void 0:o.href),tv039:t,tv077:"1",tv078:"homepage_country_selection",tv079:"",tv084:e,tv174:"first",tv202:(null==(i=null==(n=window.tyweb)?void 0:n.configuration)?void 0:i.ipCountry)||""};window._gcol.Fire("az_delivery",d)}};class _{constructor(){}async refreshAbTestingCookie(){axios.get(`${window.location.origin}/abtesting/refresh`)}}const z=({configuration:e})=>{var t;const{ipString:o,cdnUrl:a,azPopup:n,azUrlPath:i}=e,[c,r]=React.useState(!1),l=new _;React.useEffect((()=>(window._PubSub.subscribe("POPUP_AZ",(()=>{r(!0)})),window.addEventListener("load",s,!0),document.body.addEventListener("click",s,{once:!0}),()=>{window.removeEventListener("load",s),document.body.removeEventListener("click",s)})),[]),React.useEffect((()=>{c&&(b("AZ_SEEN","true",!0),(e=>{var t,o,a,n;if(y()){const{id:i,abTestCookie:c,pid:r,sid:l}=E(),s={channel:"web",event:"az_delivery",sid:l,pid:r,tv003:"popup_seen",tv006:c,tv007:i,tv018:i.length>0?"1":"0",tv019:window.location.href,tv020:"homepage",tv021:document.referrer,tv022:null==(o=null==window?void 0:window._gcol)?void 0:o.getReferrerPageType(null==(t=null==window?void 0:window.location)?void 0:t.href),tv039:e,tv077:"1",tv078:"homepage_country_selection",tv079:"",tv174:"first",tv202:(null==(n=null==(a=window.tyweb)?void 0:a.configuration)?void 0:n.ipCountry)||""};window._gcol.Fire("az_delivery",s)}})(e.ipString))}),[c]);const s=()=>{setTimeout((()=>{const e=document.body.classList||[];Array.from(e).find((e=>"gender-popup-lock"===e))||r(!0)}))},d=()=>{window.location.reload()};return React.createElement(w,{closeModal:()=>{(e=>{var t,o,a,n;if(y()){const{id:i,abTestCookie:c,pid:r,sid:l}=E(),s={channel:"web",event:"az_delivery",sid:l,pid:r,tv003:"popup_close",tv006:c,tv007:i,tv018:i.length>0?"1":"0",tv019:window.location.href,tv020:"homepage",tv021:document.referrer,tv022:null==(o=null==window?void 0:window._gcol)?void 0:o.getReferrerPageType(null==(t=null==window?void 0:window.location)?void 0:t.href),tv039:e,tv077:"1",tv078:"homepage_country_selection",tv079:"",tv174:"first",tv202:(null==(n=null==(a=window.tyweb)?void 0:a.configuration)?void 0:n.ipCountry)||""};window._gcol.Fire("az_delivery",s)}})(o)},isShowModal:c,hideCloseIcon:!0},React.createElement("div",{className:"az-popup"},React.createElement("div",{className:"popup-images-wrapper"},React.createElement("img",{src:`${a}/web/production/tr_flag.svg`,alt:"Türkiye bayrağı"}),React.createElement("span",{className:"exchange-icon-wrapper"},React.createElement("img",{className:"exchange-icon",src:`${a}/web/production/exchange-circle.svg`,alt:"exchange-icon"})),React.createElement("img",{src:`${a}/web/production/az-flag-new.svg`,alt:"Azerbaycan bayrağı"})),React.createElement("p",{className:"az-info"},n.titleText),null==(t=n.content)?void 0:t.map(((e,t)=>React.createElement("div",{className:"item-area",key:`info-text-${t}`},React.createElement("span",{className:"icon-wrapper"},"class"===e.iconType?React.createElement("i",{className:`i-my-${e.icon}`}):React.createElement("img",{src:`${e.icon}`,alt:"coin stack"})),React.createElement("p",{className:"item-text"},e.text)))),React.createElement("div",{className:"buttons-wrapper"},React.createElement("button",{className:"az-button az-action",onClick:async()=>{b("AZ_SELECTED",!0),r(!1),R("azerbaycan",o),await l.refreshAbTestingCookie(),"boutique_listing"===window.pageObject.page_type?window.location.href=i:d()}},n.azButtonText),React.createElement("button",{className:"az-action tr-button",onClick:async()=>{d(),b("AZ_SELECTED",!1),r(!1),R("türkiye",o),await l.refreshAbTestingCookie()}},n.trButtonText))))},C=({configuration:e})=>{const[t,o]=React.useState(!1),[a,n]=React.useState(!1);return React.useEffect((()=>{const t=f("AZ_ELIGIBLE"),a=f("AZ_SEEN");"true"===t&&(e.isTrendyolMilla&&e.millaAzPopupEnabled&&o(!0),e.isTrendyolMilla||!e.azEnabled||a&&"false"!==a||n(!0))}),[]),React.createElement(l,{value:s[e.languageCode]},t&&React.createElement(g,{configuration:e}),a&&React.createElement(z,{configuration:e}))};ReactDOM.render(React.createElement(C,i({},window.__AZ_POPUP_APP_INITIAL_STATE__)),document.getElementById("az-popup-app"));
